{% extends 'wagtailadmin/bulk_actions/confirmation/base.html' %}
{% load i18n wagtailusers_tags wagtailadmin_tags %}

{% block titletag %}{% blocktrans count counter=users|length %}Assign role to 1 user {% plural %}Assign role to {{ counter }} users{% endblocktrans %}{% endblock %}

{% block header %}
    {% trans "Assign role" as header_str %}
    {% include "wagtailadmin/shared/header.html" with title=header_str icon="doc-empty-inverse" %}
{% endblock header %}

{% block objects_with_access %}
        {% if users %}
        <p>{% trans "Are you sure you want to assign this role to these users?" %}</p>
        <ul>
            {% for user in users %}
            <li>
                <a href="{% url 'wagtailusers_users:edit' user.user.pk %}" target="_blank" rel="noopener noreferrer">{{user.user|user_display_name }}</a>
            </li>
            {% endfor %}
        </ul>
        {% endif %}
{% endblock objects_with_access %}

{% block objects_with_no_access %}

{% blocktrans asvar no_access_msg count counter=users_with_no_access|length %}You don't have permission to edit this user{% plural %}You don't have permission to edit these users{% endblocktrans %}
{% include 'wagtailusers/bulk_actions/list_objects_with_no_access.html' with objects=users_with_no_access no_access_msg=no_access_msg %}

{% trans "A superuser cannot change their role" as no_access_msg %}
{% include 'wagtailusers/bulk_actions/list_objects_with_no_access.html' with objects=mark_self_as_not_admin no_access_msg=no_access_msg %}

{% endblock objects_with_no_access %}

{% block form_section %}
{% if users %}
    {% trans 'Yes, assign' as action_button_text %}
    {% trans "No, don't assign" as no_action_button_text %}
    {% include 'wagtailadmin/bulk_actions/confirmation/form_with_fields.html' %}
{% else %}
    {% include 'wagtailadmin/bulk_actions/confirmation/go_back.html' %}
{% endif %}
{% endblock form_section %}
